<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FS STUDIO - Administration</title>
    <link rel="stylesheet" href="admin.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Ã‰cran de connexion -->
    <div class="login-screen" id="loginScreen">
        <div class="login-container">
            <div class="login-header">
                <h1>ğŸ” Administration</h1>
                <p>AccÃ¨s rÃ©servÃ© aux administrateurs</p>
            </div>
            <div class="login-form">
                <input type="password" id="adminCode" placeholder="Code d'accÃ¨s" autocomplete="off">
                <button id="loginBtn">Se connecter</button>
                <p class="error-message" id="errorMessage" style="display: none;"></p>
            </div>
        </div>
    </div>

    <!-- Interface Admin -->
    <div class="admin-container" id="adminContainer" style="display: none;">
        <header class="admin-header">
            <div class="admin-title">
                <h1>âš™ï¸ Administration FS STUDIO</h1>
                <span class="admin-badge">ADMIN</span>
            </div>
            <button class="logout-btn" id="logoutBtn">DÃ©connexion</button>
        </header>

        <div class="admin-content">
            <!-- Section Chat Management -->
            <div class="admin-section">
                <div class="section-header">
                    <h2>ğŸ’¬ Gestion du Chat</h2>
                    <div class="online-stats">
                        <span class="stat-item">
                            <span class="stat-label">En ligne:</span>
                            <span class="stat-value" id="adminOnlineCount">0</span>
                        </span>
                    </div>
                </div>

                <!-- Zone de messages avec modÃ©ration -->
                <div class="chat-admin-container">
                    <div class="chat-messages-admin" id="chatMessagesAdmin">
                        <div class="loading-message">Chargement des messages...</div>
                    </div>
                </div>

                <!-- Actions rapides -->
                <div class="admin-actions">
                    <button class="action-btn danger" id="clearAllBtn">ğŸ—‘ï¸ Supprimer tous les messages</button>
                    <button class="action-btn" id="refreshBtn">ğŸ”„ Actualiser</button>
                </div>
            </div>

            <!-- Section Envoyer un message -->
            <div class="admin-section">
                <div class="section-header">
                    <h2>ğŸ“¢ Envoyer un message</h2>
                </div>
                <div class="send-message-form">
                    <div class="form-group">
                        <label>Nom d'affichage:</label>
                        <input type="text" id="adminUsername" value="Admin FS Studio" maxlength="20">
                    </div>
                    <div class="form-group">
                        <label>Message:</label>
                        <textarea id="adminMessage" placeholder="Tapez votre message..." maxlength="500" rows="3"></textarea>
                    </div>
                    <div class="form-actions">
                        <button class="send-btn" id="adminSendBtn">ğŸ“¤ Envoyer</button>
                        <span class="char-count"><span id="charCount">0</span>/500</span>
                    </div>
                </div>
            </div>

            <!-- Section Radio / Streaming Vocal -->
            <div class="admin-section">
                <div class="section-header">
                    <h2>ğŸ™ï¸ Radio / Streaming Vocal</h2>
                    <div class="radio-status" id="radioStatus">
                        <span class="status-indicator" id="radioStatusIndicator"></span>
                        <span id="radioStatusText">Hors ligne</span>
                    </div>
                </div>

                <!-- Info importante -->
                <div class="radio-info-box">
                    <h4>ğŸ“¢ Diffusion vocale en direct</h4>
                    <p>Ce systÃ¨me diffuse votre voix directement sur le site, sans serveur externe nÃ©cessaire.</p>
                    <ul>
                        <li>âœ… Aucune configuration requise</li>
                        <li>âœ… Diffusion en temps rÃ©el</li>
                        <li>âœ… Accessible Ã  tous les visiteurs</li>
                        <li>âœ… QualitÃ© audio optimisÃ©e</li>
                    </ul>
                </div>

                <!-- ContrÃ´le vocal en direct -->
                <div class="voice-control">
                    <div class="voice-header">
                        <h3>ğŸ¤ Diffusion vocale en direct</h3>
                    </div>
                    <div class="voice-controls">
                        <button class="voice-btn" id="startVoiceBtn">
                            <span class="voice-icon">ğŸ¤</span>
                            <span>DÃ©marrer la diffusion</span>
                        </button>
                        <button class="voice-btn stop" id="stopVoiceBtn" style="display: none;">
                            <span class="voice-icon">â¹ï¸</span>
                            <span>ArrÃªter la diffusion</span>
                        </button>
                    </div>
                    <div class="voice-info" id="voiceInfo" style="display: none;">
                        <div class="voice-meter">
                            <div class="meter-label">Niveau audio:</div>
                            <div class="meter-bar">
                                <div class="meter-fill" id="audioLevel"></div>
                            </div>
                        </div>
                        <div class="audio-quality-info">
                            <div class="quality-badge">ğŸšï¸ Normalisation active</div>
                            <div class="quality-badge">ğŸ”‡ Suppression de bruit</div>
                            <div class="quality-badge">ğŸ›ï¸ Compression audio</div>
                        </div>
                        <p class="voice-status-text" id="voiceStatusText">En attente de permission microphone...</p>
                        <div class="stream-stats" id="streamStats" style="display: none;">
                            <div class="stat-row">
                                <span>Chunks envoyÃ©s:</span>
                                <span id="chunksSent">0</span>
                            </div>
                            <div class="stat-row">
                                <span>Dernier envoi:</span>
                                <span id="lastSent">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Instructions -->
                <div class="radio-instructions">
                    <h4>ğŸ“‹ Comment utiliser:</h4>
                    <ol>
                        <li>Cliquez sur "DÃ©marrer la diffusion" ci-dessous</li>
                        <li>Autorisez l'accÃ¨s au microphone dans votre navigateur</li>
                        <li>Parlez normalement - votre voix sera diffusÃ©e en direct</li>
                        <li>Les visiteurs du site entendront votre voix en temps rÃ©el</li>
                        <li>Cliquez sur "ArrÃªter" pour mettre fin Ã  la diffusion</li>
                    </ol>
                    <p class="info-note">ğŸ’¡ <strong>Astuce:</strong> Assurez-vous d'avoir un bon micro et un environnement calme pour une meilleure qualitÃ© audio.</p>
                </div>
            </div>

            <!-- Section Statistiques -->
            <div class="admin-section">
                <div class="section-header">
                    <h2>ğŸ“Š Statistiques</h2>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ’¬</div>
                        <div class="stat-info">
                            <div class="stat-number" id="totalMessages">0</div>
                            <div class="stat-label">Messages totaux</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ‘¥</div>
                        <div class="stat-info">
                            <div class="stat-number" id="totalUsers">0</div>
                            <div class="stat-label">Utilisateurs uniques</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ™ï¸</div>
                        <div class="stat-info">
                            <div class="stat-number" id="listenersCount">0</div>
                            <div class="stat-label">Auditeurs</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <!-- Configuration Firebase -->
    <script src="firebase-config.js"></script>
    
    <!-- Script Admin -->
    <script src="admin.js"></script>
</body>
</html>

